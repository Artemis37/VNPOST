@model VNPOSTWebUILibrary.Model.Unit
@using VNPOSTWebUILibrary.BussinessLogic

@{
    ViewBag.Title = "Thêm đơn vị";

    //load categoryunit list
    UnitsProcessor _unitsProcessor = new UnitsProcessor();
    var categoryUnitList = await _unitsProcessor.getAllCategoryUnit();
}

@section myCss {
    <link href="~/lib/node_modules/sweetalert2/dist/sweetalert2.css" rel="stylesheet" />
    <link href="~/css/Unit/UnitAdd.css" rel="stylesheet" />
}

@section myJs {
    <script src="~/lib/node_modules/sweetalert2/dist/sweetalert2.all.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/js/Unit/UnitAdd.js"></script>
}

<div id="outer" class="container-fluid">
    <div id="outer">
        <form method="post">
            <div class="form-row">
                <div class="form-group col-6">
                    <label asp-for="CategoryUnitId">Loại đơn vị</label>
                    @if (Model == null)
                    {
                        <select class="form-control" asp-for="CategoryUnitId">
                            @foreach (var item in categoryUnitList)
                            {
                                <option value="@item.id">@item.name</option>
                            }
                        </select>
                    }
                    else
                    {
                        @if (ViewBag.Action == "View")
                        {
                            <select class="form-control" asp-for="CategoryUnitId" disabled>
                                @foreach (var item in categoryUnitList)
                                {
                                    @if (item.id == Model.CategoryUnitId)
                                    {
                                        <option value="@item.id" selected="selected">@item.name</option>
                                    }
                                    else
                                    {
                                        <option value="@item.id">@item.name</option>
                                    }
                                }
                            </select>
                        } else if (ViewBag.Action == "Edit"){
                        <select class="form-control" asp-for="CategoryUnitId">
                            @foreach (var item in categoryUnitList)
                            {
                                @if (item.id == Model.CategoryUnitId)
                                {
                                    <option value="@item.id" selected="selected">@item.name</option>
                                }
                                else
                                {
                                    <option value="@item.id">@item.name</option>
                                }
                            }
                        </select>
                    }
                }
                </div>
                <div class="form-group col-6">
                    <label asp-for="Id">Mã đơn vị: </label>
                    @if(Model == null) { //add
                        <input asp-for="Id" class="form-control" />
                    }else {
                        <input asp-for="Id" class="form-control" readonly/>
                    }
                </div>
            </div>
            <div class="form-group">
                <label asp-for="Name">Tên đơn vị: </label>
                @if(Model == null) { //add
                    <input asp-for="Name" class="form-control" />
                }else { 
                    if(ViewBag.Action == "View") { 
                        <input asp-for="Name" class="form-control" readonly/>
                    }else if(ViewBag.Action == "Edit"){ 
                        <input asp-for="Name" class="form-control" />
                    }
                }
            </div>
            <div class="form-group">
                <label asp-for="Address">Địa chỉ</label>
                @if (Model == null)//add
                {
                    <input asp-for="Address" class="form-control" />
                }
                else
                {
                    if (ViewBag.Action == "View")
                    {
                        <input asp-for="Address" class="form-control" readonly/>
                    }
                    else if (ViewBag.Action == "Edit")
                    {
                        <input asp-for="Address" class="form-control" />
                    }
                }
            </div>
            <div class="form-row">
                <div class="form-group col-6">
                    <label asp-for="Phone">Điện thoại</label>
                    @if (Model == null)//add
                    {
                        <input asp-for="Phone" class="form-control" />
                    }
                    else
                    {
                        if (ViewBag.Action == "View")
                        {
                            <input asp-for="Phone" class="form-control" readonly/>
                        }
                        else if (ViewBag.Action == "Edit")
                        {
                            <input asp-for="Phone" class="form-control" />
                        }
                    }
                </div>
                <div class="form-group col-6">
                    <label asp-for="UnitRankId">Cấp đơn vị:</label>
                    @if (Model == null)//add
                    {
                        <select asp-for="UnitRankId" class="form-control">
                            <option value="1">Bưu điện tỉnh và tương đương</option>
                            <option value="2">Bưu điện huyện và tương đương</option>
                            <option value="3">Bưu điện xã và tương đương</option>
                        </select>
                    }
                    else
                    {
                        if (ViewBag.Action == "View")
                        {
                            <select asp-for="UnitRankId" class="form-control" disabled>
                                @if(Model.UnitRankId == "1") { 
                                <option value="1">Bưu điện tỉnh và tương đương</option>
                                }else { 
                                <option value="1">Bưu điện tỉnh và tương đương</option>
                                }
                                @if(Model.UnitRankId == "2") { 
                                <option value="2">Bưu điện huyện và tương đương</option>
                                }else { 
                                <option value="2">Bưu điện huyện và tương đương</option>
                                }
                                @if(Model.UnitRankId == "3") { 
                                <option value="3">Bưu điện xã và tương đương</option>
                                }else { 
                                <option value="3">Bưu điện xã và tương đương</option>
                                }
                            </select>
                        }
                        else if (ViewBag.Action == "Edit")
                        {
                            <select asp-for="UnitRankId" class="form-control">
                                @if(Model.UnitRankId == "1") { 
                                <option value="1">Bưu điện tỉnh và tương đương</option>
                                }else { 
                                <option value="1">Bưu điện tỉnh và tương đương</option>
                                }
                                @if(Model.UnitRankId == "2") { 
                                <option value="2">Bưu điện huyện và tương đương</option>
                                }else { 
                                <option value="2">Bưu điện huyện và tương đương</option>
                                }
                                @if(Model.UnitRankId == "3") { 
                                <option value="3">Bưu điện xã và tương đương</option>
                                }else { 
                                <option value="3">Bưu điện xã và tương đương</option>
                                }
                            </select>
                        }
                    }
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-6">
                    <label asp-for="LicenseNumber">Số giấy phép</label>
                    @if (Model == null)//add
                    {
                        <input asp-for="LicenseNumber" class="form-control" />
                    }
                    else
                    {
                        if (ViewBag.Action == "View")
                        {
                            <input asp-for="LicenseNumber" class="form-control" readonly/>
                        }
                        else if (ViewBag.Action == "Edit")
                        {
                            <input asp-for="LicenseNumber" class="form-control" />
                        }
                    }
                </div>
                <div class="form-group col-6">
                    <label asp-for="AppointedDate">Ngày cấp phép</label>
                    @if (Model == null)//add
                    {
                        <input asp-for="AppointedDate" type="date" class="form-control" />
                    }
                    else
                    {
                        if (ViewBag.Action == "View")
                        {
                            <input asp-for="AppointedDate" type="date" class="form-control" readonly/>
                        }
                        else if (ViewBag.Action == "Edit")
                        {
                            <input asp-for="AppointedDate" type="date" class="form-control" />
                        }
                    }
                </div>
            </div>
            <div class="form-group col-6 pl-0">
                <label for="statuss">Trạng thái: </label>
                @if (Model == null)//add
                {
                    <select id="statuss" name="statuss" class="form-control">
                        <option value="1">Có hiệu lực</option>
                        <option value="0">Hết hiệu lực</option>
                    </select>
                }
                else
                {
                    if (ViewBag.Action == "View")
                    {
                        <select id="statuss" name="statuss" class="form-control" disabled>
                            @if (Model.Status){
                            <option value="1" selected="selected">Có hiệu lực</option>
                            <option value="0">Hết hiệu lực</option>
                            }else { 
                            <option value="1">Có hiệu lực</option>
                            <option value="0" selected="selected">Hết hiệu lực</option>
                            }
                        </select>
                    }
                    else if (ViewBag.Action == "Edit")
                    {
                        <select id="statuss" name="statuss" class="form-control">
                            @if (Model.Status){
                            <option value="1" selected="selected">Có hiệu lực</option>
                            <option value="0">Hết hiệu lực</option>
                            }else { 
                            <option value="1">Có hiệu lực</option>
                            <option value="0" selected="selected">Hết hiệu lực</option>
                            }
                        </select>
                    }
                }
            </div>
            <div class="form-group">
                <label asp-for="Note">Ghi chú</label>
                @if (Model == null)//add
                {
                    <textarea asp-for="Note" rows="5" class="form-control"></textarea>
                }
                else
                {
                    if (ViewBag.Action == "View")
                    {
                        <textarea asp-for="Note" rows="5" class="form-control" readonly></textarea>
                    }
                    else if (ViewBag.Action == "Edit")
                    {
                        <textarea asp-for="Note" rows="5" class="form-control"></textarea>
                    }
                }
            </div>
            <div style="color: #e74c3c" asp-validation-summary="All"></div>
            <input type="submit" class="btn btn-primary mr-3" value="Lưu" />
            <a href="@Url.Action("ListUnit","Unit")" class="btn btn-secondary">Quay lại</a>
        </form>
    </div>
</div>